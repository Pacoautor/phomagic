{% extends "base.html" %}
{% load static %}

{% block title %}Vistas disponibles – {{ subcategory.category.name }} / {{ subcategory.name }}{% endblock %}

{% block content %}
<div class="container py-4">
  <h1 class="mb-3">Vistas disponibles – {{ subcategory.category.name }} / {{ subcategory.name }}</h1>

  {% with opts=view_options|default:views %}
    {% if not opts %}
      <div class="alert alert-warning">No hay vistas configuradas para esta subcategoría.</div>
    {% else %}
      <div class="row g-4">
        {% for v in opts %}
          <div class="col-12 col-md-6 col-lg-4">
            <div class="card h-100 bg-dark text-light border-0 shadow-sm">
              {% if v.image %}
                <div class="ratio ratio-1x1" style="background:#fff;border-bottom:1px solid #333;">
                  <img src="{{ v.image.url }}" alt="{{ v.name }}" style="object-fit:contain; width:100%; height:100%;">
                </div>
              {% endif %}
              <div class="card-body d-flex flex-column">
                <h5 class="card-title">{{ v.name }}</h5>
                <a class="btn btn-primary mt-auto w-100"
                   href="{% url 'generate_photo' subcategory.id v.id %}">
                  Elegir esta vista
                </a>
              </div>
            </div>
          </div>
        {% endfor %}
      </div>
    {% endif %}
  {% endwith %}

  <button type="button" class="btn btn-outline-secondary mt-4" onclick="history.back()">Volver</button>
</div>
{% endblock %}
